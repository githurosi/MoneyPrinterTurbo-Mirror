name: Fixed Clone Workflow

on:
  workflow_dispatch:

jobs:
  clone:
    runs-on: ubuntu-latest
    steps:
      - name: æ˜¾å¼æ£€å‡ºä»“åº“
        uses: actions/checkout@v4
        with:
          repository: harry0703/MoneyPrinterTurbo.git  # âœ… å®Œæ•´åœ°å€
          path: ./moneyprinter-turbo  # âœ… å”¯ä¸€è·¯å¾„
          fetch-depth: 0
          ref: main  # âœ… æŒ‡å®šåˆ†æ”¯

      - name: éªŒè¯å…‹éš†ç»“æœ
        run: |
          # æ£€æŸ¥å…³é”®æ–‡ä»¶
          test -f ./moneyprinter-turbo/README.md || exit 1
          
          # éªŒè¯åˆ†æ”¯
          cd ./moneyprinter-turbo
          CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)
          [ "$CURRENT_BRANCH" = "main" ] || exit 1

      - name: å®‰å…¨æäº¤ï¼ˆå¦‚æœéœ€è¦ï¼‰
        if: success()
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "ğŸ”„ æˆåŠŸå…‹éš† MoneyPrinterTurbo"
          branch: main
          commit_user_name: "github-actions[bot]"
          commit_user_email: "github-actions[bot]@users.noreply.github.com"
